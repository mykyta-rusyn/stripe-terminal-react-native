var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.requestNeededAndroidPermissions=requestNeededAndroidPermissions;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _reactNative=require("react-native");var defaultFineLocationParams={title:'Location Permission',message:'Stripe Terminal needs access to your location',buttonPositive:'Accept'};var isAndroid12orHigher=function isAndroid12orHigher(){return _reactNative.Platform.OS==='android'&&_reactNative.Platform.Version>=31;};function requestNeededAndroidPermissions(){return _requestNeededAndroidPermissions.apply(this,arguments);}function _requestNeededAndroidPermissions(){_requestNeededAndroidPermissions=(0,_asyncToGenerator2.default)(function*(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$accessFineLocati=_ref.accessFineLocation,accessFineLocation=_ref$accessFineLocati===void 0?defaultFineLocationParams:_ref$accessFineLocati;var grantedFineLocation=yield _reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,accessFineLocation||defaultFineLocationParams);if(!hasGrantedPermission(grantedFineLocation)){return{error:(0,_defineProperty2.default)({},_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,grantedFineLocation)};}if(!isAndroid12orHigher()){return{error:null};}var grantedBT=yield _reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_CONNECT);if(!hasGrantedPermission(grantedBT)){return{error:(0,_defineProperty2.default)({},_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_CONNECT,grantedBT)};}var grantedBTScan=yield _reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_SCAN);if(!hasGrantedPermission(grantedBTScan)){return{error:(0,_defineProperty2.default)({},_reactNative.PermissionsAndroid.PERMISSIONS.BLUETOOTH_SCAN,grantedBTScan)};}return{error:null};});return _requestNeededAndroidPermissions.apply(this,arguments);}var hasGrantedPermission=function hasGrantedPermission(status){return status===_reactNative.PermissionsAndroid.RESULTS.GRANTED;};
//# sourceMappingURL=androidPermissionsUtils.js.map