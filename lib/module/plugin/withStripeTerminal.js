var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.addBTPermissionToManifest=addBTPermissionToManifest;exports.addLocationPermissionToManifest=addLocationPermissionToManifest;exports.withNoopSwiftFile=exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _configPlugins=require("@expo/config-plugins");var pkg={"name":"@stripe/stripe-terminal-react-native","version":"0.0.1-beta.27","description":"Stripe Terminal React Native SDK","main":"lib/commonjs/index","module":"lib/module/index","types":"lib/typescript/src/index.d.ts","react-native":"src/index","source":"src/index","scripts":{"test":"yarn unit-test:android && yarn unit-test:js","typescript":"tsc --noEmit","lint":"jest --config \"jest.eslint.config.js\"","prettier":"prettier --write \"**/*.{ts,js,jsx,tsx}\"","prepare":"bob build","dev-app":"yarn --cwd dev-app","example-app":"yarn --cwd example-app","pods":"cd dev-app && pod-install --quiet","clean":"rm -rf node_modules && rm -rf dev-app/node_modules && rm -rf dev-app/ios/Pods","bootstrap":"yarn dev-app && yarn && yarn pods","deep-clean":"rm -rf node_modules dev-app/node_modules dev-app/ios/Pods dev-app/android/.gradle dev-app/android/.cxx dev-app/android/app/build dev-app/ios/build ~/Library/Developer/Xcode/DerivedData","reset-watch":"watchman watch-del ./ && watchman watch-project ./ && rm -rf /tmp/metro-* /tmp/haste-map-*","reset":"yarn reset-watch && yarn deep-clean && yarn bootstrap","dev-app:build:android:release":"cd dev-app/android && ./gradlew assembleRelease ; cd -","e2e:build:example:ios":"detox build --configuration ios.example","e2e:build:example:android":"detox build --configuration android.example","e2e:build:android":"detox build --configuration android","e2e:build:ios":"detox build --configuration ios","e2e:test:android":"yarn get:testbutler && detox test --configuration android --take-screenshots failing --loglevel verbose","e2e:test:ios":"detox test --configuration ios --take-screenshots failing --loglevel verbose","e2e:build:android:release":"detox build --configuration android.emu.release","e2e:build:ios:release":"detox build --configuration ios.sim.release","e2e:test:android:release":"maestro test -e APP_ID=com.dev.app.stripeterminalreactnative maestro/app.yml","e2e:test:ios:release":"maestro test -e APP_ID=com.stripe.terminal.reactnative.dev.app maestro/app.yml","get:testbutler":"curl -f -o ./test-butler-app.apk https://repo1.maven.org/maven2/com/linkedin/testbutler/test-butler-app/2.2.1/test-butler-app-2.2.1.apk","docs":"npx typedoc ./src/index.tsx --out ./docs/api-reference --tsconfig ./tsconfig.json --readme none","unit-test:android":"cd android && ./gradlew testDebugUnitTest","unit-test:ios":"xcodebuild test -workspace dev-app/ios/StripeTerminalReactNativeDevApp.xcworkspace -destination 'platform=iOS Simulator,name=iPhone 16' -scheme UnitTests","unit-test:js":"jest"},"keywords":["react-native","ios","android"],"repository":"https://github.com/stripe/stripe-terminal-react-native","author":"Stripe","license":"MIT","bugs":{"url":"https://github.com/stripe/stripe-terminal-react-native"},"homepage":"https://github.com/stripe/stripe-terminal-react-native#readme","publishConfig":{"registry":"https://registry.npmjs.org/"},"devDependencies":{"@babel/traverse":"^7.26.5","@commitlint/config-conventional":"^11.0.0","@expo/config-plugins":"^7.8.4","@react-native-community/bob":"^0.16.2","@react-native-community/cli":"^15.0.1","@react-native-community/cli-platform-android":"^15.0.1","@react-native-community/cli-platform-ios":"^15.0.1","@react-native/babel-preset":"^0.78.0","@react-native/eslint-config":"0.78.0","@react-native/metro-config":"^0.78.0","@react-native/typescript-config":"0.78.0","@rnx-kit/align-deps":"^3.0.5","@types/base-64":"^1.0.0","@types/jest":"^29.5.11","@types/react":"^18.2.6","@types/react-native":"0.63.18","@types/react-test-renderer":"^18.0.0","commitlint":"^11.0.0","detox":"^20.32.0","eslint":"^8.56.0","eslint-config-prettier":"^7.0.0","eslint-plugin-detox":"^1.0.0","eslint-plugin-ft-flow":"2.0.1","eslint-plugin-prettier":"^3.3.0","husky":"^6.0.0","jest":"^29.2.1","jest-environment-jsdom":"^29.7.0","jest-junit":"^13.2.0","jest-runner-eslint":"^1.0.0","pod-install":"^0.1.0","prettier":"2.8.8","react":"19.0.0","react-native":"^0.78.0","react-test-renderer":"19.0.0","stripe":"^7.14.0","typedoc":"^0.28.1","typescript":"5.0.4","@testing-library/react-native":"^12.4.0","base-64":"^1.0.0","react-native-gradle-plugin":"^0.71.19"},"jest":{"preset":"react-native","setupFiles":["<rootDir>/jestSetup.js"],"reporters":["default","jest-junit"],"testEnvironment":"jsdom","testEnvironmentOptions":{"browsers":["chrome","firefox","safari"]},"modulePathIgnorePatterns":["<rootDir>/dev-app/node_modules","<rootDir>/lib/"],"moduleNameMapper":{"package.json$":"<rootDir>/package.json"}},"peerDependencies":{"react":"*","react-native":"*"},"commitlint":{"extends":["@commitlint/config-conventional"]},"eslintConfig":{"root":true,"extends":["@react-native","prettier"],"rules":{"prettier/prettier":["error",{"quoteProps":"consistent","singleQuote":true,"tabWidth":2,"trailingComma":"es5","useTabs":false}]}},"eslintIgnore":["node_modules/","lib/","android/build","dev-app/ios","dev-app/android"],"prettier":{"quoteProps":"consistent","singleQuote":true,"tabWidth":2,"trailingComma":"es5","useTabs":false},"@react-native-community/bob":{"source":"src","output":"lib","targets":[["commonjs",{"configFile":true}],["module",{"configFile":true}],["typescript",{"project":"tsconfig.build.json"}]]},"rnx-kit":{"kitType":"library","alignDeps":{"requirements":{"development":["react-native@0.78"],"production":["react-native@*"]},"capabilities":["babel-preset-react-native","core","core-android","core-ios","jest","react","react-test-renderer"]}},"packageManager":"yarn@1.22.22+sha512.a6b2f7906b721bba3d67d4aff083df04dad64c399707841b7acf00f6b133b7ac24255f2652fa22ae3534329dc6180534e98d17432037ff6fd140556e2bb3137e"};var withStripeTerminal=function withStripeTerminal(config,props){config=withStripeTerminalIos(config,props);config=withNoopSwiftFile(config);config=withStripeTerminalAndroid(config);config=withJetifierIgnoringJackson(config);return config;};var withStripeTerminalAndroid=function withStripeTerminalAndroid(expoConfig){return(0,_configPlugins.withAndroidManifest)(expoConfig,function(config){config.modResults=addBTPermissionToManifest(config.modResults);config.modResults=addLocationPermissionToManifest(config.modResults);return config;});};var withJetifierIgnoringJackson=function withJetifierIgnoringJackson(expoConfig){return(0,_configPlugins.withGradleProperties)(expoConfig,function(config){config.modResults.push({key:'android.jetifier.ignorelist',value:'jackson-core',type:'property'});return config;});};function addLocationPermissionToManifest(androidManifest){if(!Array.isArray(androidManifest.manifest['uses-permission'])){androidManifest.manifest['uses-permission']=[];}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.ACCESS_FINE_LOCATION';})){var _androidManifest$mani;(_androidManifest$mani=androidManifest.manifest['uses-permission'])==null||_androidManifest$mani.push({$:{'android:name':'android.permission.ACCESS_FINE_LOCATION'}});}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.ACCESS_COARSE_LOCATION';})){var _androidManifest$mani2;(_androidManifest$mani2=androidManifest.manifest['uses-permission'])==null||_androidManifest$mani2.push({$:{'android:name':'android.permission.ACCESS_COARSE_LOCATION'}});}return androidManifest;}function addBTPermissionToManifest(androidManifest){if(!Array.isArray(androidManifest.manifest['uses-permission'])){androidManifest.manifest['uses-permission']=[];}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.BLUETOOTH_CONNECT';})){var _androidManifest$mani3;(_androidManifest$mani3=androidManifest.manifest['uses-permission'])==null||_androidManifest$mani3.push({$:{'android:name':'android.permission.BLUETOOTH_CONNECT'}});}if(!androidManifest.manifest['uses-permission'].find(function(item){return item.$['android:name']==='android.permission.BLUETOOTH_SCAN';})){var _androidManifest$mani4;(_androidManifest$mani4=androidManifest.manifest['uses-permission'])==null||_androidManifest$mani4.push({$:{'android:name':'android.permission.BLUETOOTH_SCAN'}});}return androidManifest;}var withStripeTerminalIos=function withStripeTerminalIos(expoConfig,props){return(0,_configPlugins.withInfoPlist)(expoConfig,function(config){if(props.bluetoothBackgroundMode){var _config$modResults$UI;config.modResults.UIBackgroundModes=[].concat((0,_toConsumableArray2.default)((_config$modResults$UI=config.modResults.UIBackgroundModes)!=null?_config$modResults$UI:[]),['bluetooth-central']);}config.modResults.NSLocationWhenInUseUsageDescription=props.locationWhenInUsePermission||'Location access is required in order to accept payments.';config.modResults.NSBluetoothPeripheralUsageDescription=props.bluetoothPeripheralPermission||'Bluetooth access is required in order to connect to supported bluetooth card readers.';config.modResults.NSBluetoothAlwaysUsageDescription=props.bluetoothAlwaysUsagePermission||'This app uses Bluetooth to connect to supported card readers.';config.modResults.NSLocalNetworkUsageDescription=props.localNetworkUsagePermission||'This app uses the local WiFi network to connect to supported card readers.';return config;});};var withNoopSwiftFile=exports.withNoopSwiftFile=function withNoopSwiftFile(config){return _configPlugins.IOSConfig.XcodeProjectFile.withBuildSourceFile(config,{filePath:'noop-file.swift',contents:['//','// @generated','// A blank Swift file must be created for native modules with Swift files to work correctly.','//',''].join('\n')});};var _default=exports.default=(0,_configPlugins.createRunOncePlugin)(withStripeTerminal,pkg.name,pkg.version);
//# sourceMappingURL=withStripeTerminal.js.map